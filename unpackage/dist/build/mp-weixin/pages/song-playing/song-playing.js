(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/song-playing/song-playing"],{"0d8e":function(t,e,n){"use strict";var i=n("61da"),s=n.n(i);s.a},"30b8":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n("d2cc"),s=n("b029"),a=function(){n.e("components/common/bing-lyric/bing-lyric").then(function(){return resolve(n("5b03"))}.bind(null,n)).catch(n.oe)},r={components:{bingLyric:a},data:function(){return{songMessageData:{},songUrlData:{},lyricData:[],songSheetData:[],songLength:"00:00",songCurrentTime:"00:00",cacheBAR:0,cacheBARSetInt:null,currentTimeBAR:0,currentTimeBARSetInt:null,isStart:!0,songId:"",songSheetId:"",songTime:0,lyric:[],switchShow:!0}},onLoad:function(t){var e=this;this.getSongMessage(t.songId,t.songSheetId),this.getCacheBARSetInt(),this.getCurrentTimeBAR(),this.$music.onEnded((function(){e.isStart=!1,e.nextSongClick()}))},onHide:function(){this.isStart=!1,this.$music.pause()},onUnload:function(){clearInterval(this.cacheBARSetInt),clearInterval(this.currentTimeBARSetInt),this.songLength="00:00",this.songCurrentTime="00:00"},methods:{switchShowClick:function(){this.switchShow=!this.switchShow},startTimeClick:function(t){this.$music.seek(t.centerTime),this.$music.play()},getSongMessage:function(t,e){this.getPlayback(t,e)},pause:function(){this.$music.paused?(console.log("直接播放"),this.isStart=!0,this.$music.play()):(this.isStart=!1,this.$music.pause())},getCacheBARSetInt:function(){var t=this;this.cacheBARSetInt=setInterval((function(){t.cacheBAR=Number.parseInt(t.$music.buffered/t.$music.duration*100)+"%"}),1e3)},getCurrentTimeBAR:function(){var t=this;this.currentTimeBARSetInt=setInterval((function(){t.currentTimeBAR=Number.parseInt(t.$music.currentTime/t.$music.duration*100)+"%",t.songTime=t.$music.currentTime}),1e3)},getPlayback:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.songSheetId||19723756;this.cacheBAR=0,this.currentTimeBAR=0,this.songId=t-0,this.songSheetId=n;for(var i=[{url:"/song/detail?ids=",data:"songMessageData"},{url:"/song/url?id=",data:"songUrlData"},{url:"/lyric?id=",data:"lyricData"}],a=this,r=function(n){e.$request({url:i[n].url+t}).then((function(t){e.$set(a,i[n].data,t)}))},c=0;c<i.length;c++)r(c);this.$request({url:"/playlist/detail?id="+n}).then((function(t){e.songSheetData=t.playlist.trackIds})),n&&setTimeout((function(){e.lyric=e.lyricData.lrc.lyric.split("\n"),e.$music.src=e.songUrlData.data[0].url,e.$music.play(),e.isStart=!0,(0,s._historySong)(e.songMessageData.songs[0].name,e.songId,e.songSheetId)}),1e3),this.$music.onTimeUpdate((function(){e.songLength=e.$music.duration,e.songCurrentTime=0===e.$music.currentTime?"00:00":e.$music.currentTime}))},lastSongClick:function(){var t=this;this.$music.stop();var e=this.songSheetData.findIndex((function(e,n){return e.id===t.songId}));if(0===e){var n=this.songSheetData.length-1;this.getPlayback(this.songSheetData[n].id,this.songSheetId)}else this.getPlayback(this.songSheetData[e-1].id,this.songSheetId)},nextSongClick:function(){var t=this;this.$music.stop();var e=this.songSheetData.findIndex((function(e,n){return e.id===t.songId})),n=this.songSheetData.length-1;e===n?this.getPlayback(this.songSheetData[0].id,this.songSheetId):this.getPlayback(this.songSheetData[e+1].id,this.songSheetId)}},computed:{moreSinger:function(){if(!this.songMessageData.songs)return"";var t=this.songMessageData.songs[0].ar;if(0!==t.length&&1===t.length)return t[0].name;var e=[];return t.forEach((function(t,n){e.push(t.name)})),e.join("/")}},filters:{timeSwitch:function(t){return t?(0,i._timeSwitch)(t):t},currentLength:function(t){return t?(0,i._timeSwitch)(t):t}}};e.default=r},"36f3":function(t,e,n){"use strict";var i=n("f4d1"),s=n.n(i);s.a},"4d89":function(t,e,n){"use strict";(function(t){n("5acd");i(n("66fd"));var e=i(n("c4fb"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"61da":function(t,e,n){},"69a9":function(t,e,n){"use strict";var i,s=function(){var t=this,e=t.$createElement,n=(t._self._c,Object.keys(t.lyricData)),i={height:"100vh",width:"100%",background:"rgba(0,0,0,0)"},s={color:"#222",activeColor:"#eee",fontSize:"30rpx",activeFontSize:"30rpx",selectedBGColor:"#eee"},a={btnText:"播放"},r=t._f("timeSwitch")(t.songLength),c=t._f("currentLength")(t.songCurrentTime);t.$mp.data=Object.assign({},{$root:{g0:n,a0:i,a1:s,a2:a,f0:r,f1:c}})},a=[];n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}))},b036:function(t,e,n){"use strict";n.r(e);var i=n("30b8"),s=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=s.a},c4fb:function(t,e,n){"use strict";n.r(e);var i=n("69a9"),s=n("b036");for(var a in s)"default"!==a&&function(t){n.d(e,t,(function(){return s[t]}))}(a);n("0d8e"),n("36f3");var r,c=n("f0c5"),o=Object(c["a"])(s["default"],i["b"],i["c"],!1,null,"377e5891",null,!1,i["a"],r);e["default"]=o.exports},f4d1:function(t,e,n){}},[["4d89","common/runtime","common/vendor"]]]);